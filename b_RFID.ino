unsigned long Cur_RFID = 0;
unsigned long Last_RFID = 0;
unsigned long RFID_tag;
//----------------------------------------
// Funcao RFID
//----------------------------------------
void RFID()
{
  Cur_RFID = millis();
  
  if ( ! RFID_reader.available())
  {
    return;
  }
  
  if((Cur_RFID - Last_RFID) < 2000){
    Serial.println("Tag lida em intervalo baixo intervalo de tempo");
    RFID_tag = RFID_reader.getCode();
    RFID_tag = 0x00;
    return;
  }
  
  if(estado_manual == HIGH){
    RFID_tag = RFID_reader.getCode();
    RFID_tag = 0x00;
    return;
  }
  RFID_tag = RFID_reader.getCode();
  Last_RFID = millis(); 
  //Debug:
  Serial.print("Wiegand HEX = ");
  Serial.println(RFID_tag ,HEX);

  //------------------------------------------------------------------------------------------------------
  // TAGS LIDOS
  //------------------------------------------------------------------------------------------------------

  // TAG 01 - (D9 FA 35 8E) - inicio da ROTA - Vel 50% - Acionamento PINO
  // TAG 02 - (07 E0 16 52) - aumentar VEL 100%
  // TAG 03 - (39 D7 35 8E) - diminuir velocidade gradativo para 30%
  // TAG 04 - (A9 4A 37 8E) - acionar buzzer e alertas visuais
  // TAG 05 - (79 9A 3D 8E) - retomar velocidade - desacionar buzzer e alertas
  // TAG 06 - (A9 A2 37 8E) - bifurcaçao - preferencia DIR/ESQ temporizado
  // TAG 07 - (D7 22 0E 52) - parar e girar 180 graus
  // TAG 08 - (69 D4 37 8E) - retomar velocidade - retomar SETPOINT
  // TAG 09 - (79 4B 39 8E) - diminuir velocidade - acionar buzzer e alertas
  // TAG 10 - (67 99 D2 52) - retomar velocidade - desacionar buzzer e alertas
  // TAG 11 - (46 F3 1F 2B) - Parar suave - desacionamento PINO - Aqui podemos colocar a funçao de giro para ele reiniciar a rota
  // TAG 12 - (39 BE EF 2B) - Teste

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  // Rota 1
  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 1  - Bifurcação e Velocidade 50%  = (97 F3 5)
  //if (RFID_tag == 0x97F35)
  if (RFID_tag == 0x97F3E)
  {
  //  cv2 = 0.5;
    ALL_BLACK();
//    if(bif_count > 1){
//      Bifurcacao(1);
//      bif_count = 0;
//    }
//    else{
//      Bifurcacao(2);
//      bif_count ++;
//    }
    Bifurcacao(2);
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  //-------------- Região da dobradeira

  // TAG 2 - Velocidade 50% = (D2 99 67) -
  //if (RFID_tag == 0xD29967)
  if (RFID_tag == 0xD29967)
  {
    cv2 = 0.5;
    Bancos_Keyence(3);
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 3 - Recolhe atuador, Banco 1  = (37 4A A9)
  //if (RFID_tag == 0x374AA9)
  if (RFID_tag == 0x374AA9)
  {
    Bancos_Keyence(1);
    parar_suave();
    atuador();    
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 4 - Banco 0, Parar, Girar, Velocidade 50% = (16 ED 07)
  //if (RFID_tag == 0x16ED07)
  if (RFID_tag == 0x16ED07)
  {
    parar_suave();
    cv2= 0.8;
    girar(1);  
    cv2 = 0.5;  
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 5 -  Banco 1, Atuador sobe  = (EF BE 39)
  //if (RFID_tag == 0xEFBE39)
  if (RFID_tag == 0xEFBE39)
  {
    Bancos_Keyence(1);
    atuador();
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  // TAG 6 - Veloidade 80%, Banco 2  = (35 FA D9)
  //if (RFID_tag == 0x35FAD9)
  if (RFID_tag == 0x35FAD9)
  {
    cv2 = 0.8;
    Bancos_Keyence(2);
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  //---------------------------- Regiao perto da entrada
  
  // TAG 7 - Velocidade 50% = (5E 3F A9)
  //if (RFID_tag == 0x53FA9)
  if (RFID_tag == 0x5E3F8E)
  {
    cv2 = 0.5;
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 8 - Recolhe atuador, Banco 1  = (5E 3F 8E)
  //if (RFID_tag == 0x5E3F8E)
  if (RFID_tag == 0x5E3FA9)
  {
    Bancos_Keyence(1);
    parar_suave();
    atuador();
  }


  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 9 - Giro, Banco 0, Velocidade 50% = (9C D9 B)
  //if (RFID_tag == 0x9CD9B)
  if (RFID_tag == 0x9CD9B)
  {
    Bancos_Keyence(1);
    parar_suave();
    cv2= 0.9;
    girar(0); 
    cv2= 0.5;
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 10 - Aciona atuador, Banco 1 = (AA 3A 9)
  //if (RFID_tag == 0xAA3A9)
  if (RFID_tag == 0xAA3A9)
  {
    Bancos_Keyence(1);
    
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 11 - Velocidade 80%, Banco 2  = (5E 3F A7)
  //if (RFID_tag == 0x5E3FA7)
  if (RFID_tag == 0x5E3FA7)
  {
    Bancos_Keyence(2);
    atuador();
    cv2 = 0.8;
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  //---------------------------------------------------- Regiao perto da guilhotina
  
  // TAG 12 - Velocidade 50% = (B0 BB 6)
  //if (RFID_tag == 0xB0BB6)
  if (RFID_tag == 0xB0BB6)
  {
    cv2 = 0.5;
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 13 - Recolhe atuador, Banco 1 = (A1 25 0)
  //if (RFID_tag == 0xA1250)
  if (RFID_tag == 0xA1250)
  {
    Bancos_Keyence(1);
    parar_suave();
    atuador();
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 14 - Banco 0, Parar, Girar, Velocidade 50% = (1F F3 46)
  //if (RFID_tag == 0x1FF346)
  if (RFID_tag == 0x943A1)
  {
    Bancos_Keyence(1);
    parar_suave();
    cv2= 0.9;
    girar(0);
    cv2= 0.5; 
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 15 - Aciona atuador, Banco 1 = (5E FA A)
  //if (RFID_tag == 0x5EFAA)
  if (RFID_tag == 0x5E3FAA)
  {
    Bancos_Keyence(2);
    atuador();
    cv2= 0.8;
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  // TAG 16 - Velocidade 50%, Banco 2 = (5E 3F AB)
  //if (RFID_tag == 0x5E3FAB)
  if (RFID_tag == 0x5E3FAB)
  {
    cv2 = 0.5;
    Bancos_Keyence(2);
  }

  //-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  
  
}
